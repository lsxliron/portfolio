/*! sidr - v2.0.0 - 2016-01-10
 * http://www.berriart.com/sidr/
 * Copyright (c) 2013-2016 Alberto Varela; Licensed MIT */

!function(e){var t,n,r=!1,i=!1,s={isUrl:function(e){var t=new RegExp("^(https?:\\/\\/)?((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,}|((\\d{1,3}\\.){3}\\d{1,3}))(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*(\\?[;&a-z\\d%_.~+=-]*)?(\\#[-a-z\\d_]*)?$","i");return t.test(e)?!0:!1},loadContent:function(e,t){e.html(t)},addPrefix:function(e){var t=e.attr("id"),n=e.attr("class");"string"==typeof t&&""!==t&&e.attr("id",t.replace(/([A-Za-z0-9_.\-]+)/g,"sidr-id-$1")),"string"==typeof n&&""!==n&&"sidr-inner"!==n&&e.attr("class",n.replace(/([A-Za-z0-9_.\-]+)/g,"sidr-class-$1")),e.removeAttr("style")},execute:function(t,n,s){"function"==typeof n?(s=n,n="sidr"):n||(n="sidr");var o,a,f,l=e("#"+n),c=e(l.data("body")),p=e("html"),v=l.outerWidth(!0),m=l.data("speed"),g=l.data("side"),y=l.data("displace"),b=l.data("onOpen"),w=l.data("onClose"),E="sidr"===n?"sidr-open":"sidr-open "+n+"-open";if("open"===t||"toggle"===t&&!l.is(":visible")){if(l.is(":visible")||r)return;if(i!==!1)return void u.close(i,function(){u.open(n)});r=!0,"left"===g?(o={left:v+"px"},a={left:"0px"}):(o={right:v+"px"},a={right:"0px"}),c.is("body")&&(f=p.scrollTop(),p.css("overflow-x","hidden").scrollTop(f)),y?c.addClass("sidr-animating").css({width:c.width(),position:"absolute"}).animate(o,{queue:!1,duration:m,complete:function(){e(this).addClass(E)}}):setTimeout(function(){c.addClass(E)},m),l.css("display","block").animate(a,{queue:!1,duration:m,complete:function(){r=!1,i=n,"function"==typeof s&&s(n),c.removeClass("sidr-animating")}}),b()}else{if(!l.is(":visible")||r)return;r=!0,"left"===g?(o={left:0},a={left:"-"+v+"px"}):(o={right:0},a={right:"-"+v+"px"}),c.is("body")&&(f=p.scrollTop(),p.css("overflow-x","").scrollTop(f)),c.addClass("sidr-animating").animate(o,{queue:!1,duration:m}).removeClass(E),l.animate(a,{queue:!1,duration:m,complete:function(){l.removeAttr("style").hide(),c.css({width:"",position:"",right:"",left:""}),e("html").css("overflow-x",""),r=!1,i=!1,"function"==typeof s&&s(n),c.removeClass("sidr-animating")}}),w()}}},o=["open","close","toggle"],u={},a=function(e){return function(t,n){s.execute(e,t,n)}};for(t=0;t<=o.length;t++)n=o[t],u[n]=a(n);e.sidr=function(t){return u[t]?u[t].apply(this,Array.prototype.slice.call(arguments,1)):"function"!=typeof t&&"string"!=typeof t&&t?void e.error("Method "+t+" does not exist on jQuery.sidr"):u.toggle.apply(this,arguments)},e.fn.sidr=function(t){var n=e.extend({name:"sidr",speed:200,side:"left",source:null,renaming:!0,body:"body",displace:!0,onOpen:function(){},onClose:function(){}},t),o=n.name,a=e("#"+o);if(0===a.length&&(a=e("<div />").attr("id",o).appendTo(e("body"))),a.addClass("sidr").addClass(n.side).data({speed:n.speed,side:n.side,body:n.body,displace:n.displace,onOpen:n.onOpen,onClose:n.onClose}),"function"==typeof n.source){var l=n.source(o);s.loadContent(a,l)}else if("string"==typeof n.source&&s.isUrl(n.source))e.get(n.source,function(e){s.loadContent(a,e)});else if("string"==typeof n.source){var c="",p=n.source.split(",");if(e.each(p,function(t,n){c+='<div class="sidr-inner">'+e(n).html()+"</div>"}),n.renaming){var v=e("<div />").html(c);v.find("*").each(function(t,n){var r=e(n);s.addPrefix(r)}),c=v.html()}s.loadContent(a,c)}else null!==n.source&&e.error("Invalid Sidr Source");return this.each(function(){var t=e(this),n=t.data("sidr"),s=!1;n||(r=!1,i=!1,t.data("sidr",o),t.bind("touchstart click",function(e){e.preventDefault(),s||(s=!0,u.toggle(o),setTimeout(function(){s=!1},100))}))})}}(jQuery);